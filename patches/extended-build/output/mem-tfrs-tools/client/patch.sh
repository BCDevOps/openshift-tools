#!/usr/bin/env bash

oc export bc/client -o json -n mem-tfrs-tools > client-backup.json
oc patch --local=true -n mem-tfrs-tools -f client-backup.json --type="json" -o json --patch='[   {     "op": "replace",     "path": "/spec/source",     "value": {       "type": "Dockerfile",       "dockerfile": "FROM client-angular-app:latest\nCOPY * /tmp/app/dist/\nCMD  /usr/libexec/s2i/run",       "images": [         {           "from": {             "kind": "ImageStreamTag",             "name": "client-angular-app:latest"           },           "paths": [             {               "sourcePath": "/opt/app-root/src/dist/.",               "destinationDir": "tmp"             }           ]         }       ]     }   },   {     "op": "replace",     "path": "/spec/strategy",     "value": {       "type": "Docker",       "dockerStrategy": {         "from": {           "kind": "ImageStreamTag",           "namespace": "openshift",           "name": "nginx-runtime:latest"         }       }     }   } ]' > client-patched.json